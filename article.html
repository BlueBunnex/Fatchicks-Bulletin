<!DOCTYPE html>
<html>
<head>
    <title>fatchicks.cc</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        @font-face {
            font-family: 'ProximaNova_Reg';
            src: url('ProximaNova_Reg.woff2') format('woff2');
        }
        @font-face {
            font-family: 'ProximaNova_Bold';
            src: url('ProximaNova_Bold.woff2') format('woff2');
        }
        
        :root { font-size: 18px; }
        body { font-family: 'ProximaNova_Reg', serif; color: #444; }
        a { color: #08e; }
        .center { width: 35rem; margin: auto; }
        
        img { width: 100%; }

        h1, h2 { font-family: 'ProximaNova_Bold'; }
        h2 { margin-top: 1em; border-bottom: 1px solid lightgrey; padding-bottom: 4px; }
    </style>

    <script type="module">
        const articleTitle = new URLSearchParams(window.location.search).get('a');
        
        const insert      = document.getElementById('insert'),
              insertTitle = document.getElementById('insert-title'),
              insertBy    = document.getElementById('insert-by');

        if (articleTitle != null) {
            
            fetch("/articles/" + articleTitle)
            .then(file => file.text())
            .then(data => {

                const parts = data.split("\n");

                for (let line of parts) {

                    // skip if line is empty
                    if (line.length == 0)
                        continue;

                    // insert based on what kind of content the line is tagged to have
                    const gap = line.indexOf(" ");
                    switch (line.substring(0, gap)) {
                        case "[title]":
                            insertTitle.innerHTML = line.substring(gap+1);
                            break;
                        case "[by]":
                            insertBy.innerHTML = line.substring(gap+1);
                            break;
                        case "[header]":
                            insert.innerHTML += `<h2>${ line.substring(gap+1) }</h2>`;
                            break;
                        case "[pic]":
                            insert.innerHTML += `<img src="${ line.substring(gap+1) }">`;
                            break;
                        default:
                            insert.innerHTML += `<p>${ line }</p>`;
                            break;
                    }
                }
                
            });
            
        } else {
            // 404
        }
    </script>
</head>
<body>

    <div class="center" style="display: flex; align-items: center; gap: 1em;">
        <strong>Fatchicks.cc</strong>
        <a href="/">Home</a>
    </div>
    
    <div id="insert" class="center" style="margin-bottom: 8em;">
        <h1 id="insert-title">Could not find article</h1>
        <p style="font-size: smaller;">by <strong id="insert-by">no one!</strong></p>
    </div>
    
</body>
</html>
