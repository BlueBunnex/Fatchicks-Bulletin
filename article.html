<!DOCTYPE html>
<html>
<head>
    <title>fatchicks.cc</title>
    <link rel="icon" type="image/x-icon" href="favicon.ico">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <style>
        @font-face {
            font-family: 'ProximaNova_Reg';
            src: url('res/ProximaNova_Reg.woff2') format('woff2');
            font-weight: normal;
        }
        @font-face {
            font-family: 'ProximaNova_Bold';
            src: url('res/ProximaNova_Bold.woff2') format('woff2');
            font-weight: bold;
        }
        
        body { font-size: 18px; font-family: 'ProximaNova_Reg', serif; color: #222; }
        a { color: #08e; }
        p { line-height: 1.2em; }
        .center { width: 35em; margin: auto; }
        
        img { width: 100%; }

        h1, h2, strong { font-family: 'ProximaNova_Bold'; }
        h1 { font-size: 2.2em; }
        h2 { font-size: 1.4em; margin: 6px 0; }
    </style>

    <script type="module">
        const articleTitle = new URLSearchParams(window.location.search).get('a');
        
        const insert      = document.getElementById('insert'),
              insertTitle = document.getElementById('insert-title'),
              insertBy    = document.getElementById('insert-by');

        if (articleTitle != null) {
            
            fetch("/articles/" + articleTitle)
            .then(file => file.text())
            .then(data => {

                const parts = data.split("\n");

                for (let line of parts) {

                    // skip if line is empty
                    if (line.length == 0)
                        continue;

                    // insert based on what kind of content the line is tagged to have
                    const gap = line.indexOf(" ");
                    switch (line.substring(0, gap)) {
                        case "[title]":
                            insertTitle.innerHTML = line.substring(gap+1);
                            break;
                        case "[by]":
                            insertBy.innerHTML = line.substring(gap+1);
                            break;
                        case "[header]":
                            insert.innerHTML += `<h2>${ line.substring(gap+1) }</h2>`;
                            break;
                        case "[pic]":
                            insert.innerHTML += `<img src="${ line.substring(gap+1) }">`;
                            break;
                        default:
                            insert.innerHTML += `<p>${ line }</p>`;
                            break;
                    }
                }
                
            });
            
        } else {
            // 404
        }
    </script>
</head>
<body>

    <div style="background: #def; padding: 1em;">
        <div class="center" style="display: flex; align-items: center; gap: 1em;">
            <strong>Fatchicks.cc</strong>
            <a href="/" style="font-size: smaller; font-family: 'ProximaNova_Bold'; text-decoration: none; color: black;">Home</a>
        </div>
    </div>
    
    <div id="insert" class="center" style="margin-bottom: 8em;">
        <h1 id="insert-title">Could not find article</h1>
        <p style="font-size: smaller;">by <strong id="insert-by">no one!</strong></p>
    </div>
    
</body>
</html>
