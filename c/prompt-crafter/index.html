<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Prompt Crafter</title>

    <script>
        const artists = [
            { display_name: "blushyspicy",    value: "blushyspicy(artist)", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcRgK8Lx11D2D8azuT1eM_l4GytBvz3OaDgcZg&s" },
            { display_name: "c.cu",           value: "c.cu(artist)", image: "https://cdn.donmai.us/original/17/b1/17b1e5ee5aca849222dc07769ce8fc1c.jpg" },
            { display_name: "betterwithsalt", value: "betterwithsalt(artist)", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQNL5aCFvwGuNr21hmh1k_vZQkG6PUwbGZc1Q&s" },
            { display_name: "lazorchef",      value: "lazorchef(artist)", image: "https://img3.gelbooru.com/images/33/47/33471ecc92fe4d837008060b655680a7.jpeg" },
            { display_name: "kipteitei",      value: "kipteitei(artist)", image: "https://us.rule34.xxx//images/1369/df94d57ec4183e3d1388be87554e6800.jpeg?11567121" },
            { display_name: "spellsx",        value: "spellsx(artist)", image: "https://images-wixmp-ed30a86b8c4ca887773594c2.wixmp.com/f/f36db054-75cc-4adf-be52-8b8e930ce06a/dfsa3l6-c79e5776-2d3a-47a3-b814-5379f05d57d1.jpg/v1/fill/w_861,h_928,q_70,strp/_as4_7__the_hot_neighbor_by_spellsx_dfsa3l6-pre.jpg?token=eyJ0eXAiOiJKV1QiLCJhbGciOiJIUzI1NiJ9.eyJzdWIiOiJ1cm46YXBwOjdlMGQxODg5ODIyNjQzNzNhNWYwZDQxNWVhMGQyNmUwIiwiaXNzIjoidXJuOmFwcDo3ZTBkMTg4OTgyMjY0MzczYTVmMGQ0MTVlYTBkMjZlMCIsIm9iaiI6W1t7ImhlaWdodCI6Ijw9MjE1NyIsInBhdGgiOiJcL2ZcL2YzNmRiMDU0LTc1Y2MtNGFkZi1iZTUyLThiOGU5MzBjZTA2YVwvZGZzYTNsNi1jNzllNTc3Ni0yZDNhLTQ3YTMtYjgxNC01Mzc5ZjA1ZDU3ZDEuanBnIiwid2lkdGgiOiI8PTIwMDAifV1dLCJhdWQiOlsidXJuOnNlcnZpY2U6aW1hZ2Uub3BlcmF0aW9ucyJdfQ.T_vWlVrU2mS2V_vzKHspj9Ffkh6VDLFFWLSTgs53iAc" },
        ];

        const characters = [
            { display_name: "Hatsune Miku", value: "hatsune miku", image: "https://i.pinimg.com/736x/41/1b/df/411bdf6e6b3d5864f8194513a6e5bbf1.jpg" },
            { display_name: "Lucoa", value: "lucoa (dragon maid)", image: "https://static.wikia.nocookie.net/2d-girls/images/8/86/Opinion-on-lucoa-v0-60597493tq9a1.webp" },
            { display_name: "Akeno Himejima", value: "akeno himejima (dxd), black hair, orange ribbon in hair, ponytail, pink eyes", image: "https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTWl74-QbT2v1oP36VyAeSlw1KXBCztW6U8xw&s" }
        ];

        const clothing = [
            { display_name: "Default for character", value: "" },
            { display_name: "Nude", value: "naked, exposed nipples" },
            { display_name: "Cat Maid", value: "cat_lingerie, cat_cutout, cat_ear_panties, maid outfit, cat maid cutout dress" },
            { display_name: "Pajamas", value: "loose pajamas" },
            { display_name: "Suit", value: "black suit, red tie, business suit, formal suit, pencil skirt, stockings" },
            { display_name: "American Flag Bikini", value: "american flag bikini, skindentation" },
            { display_name: "Cow Girl", value: "cowprint bikini, jean shorts, thigh highs, cow bell choker, skindentation" },
            { display_name: "Black Lingerie", value: "black lingerie, frilly lingerie, underwear, skindentation" },
        ];

        function init() {

            // load artists
            const artistsArea = document.getElementById("artists");
            
            for (const i in artists) {
                
                artistsArea.innerHTML += `
                    <input class="boxy" type="checkbox" oninput="craft()" id="artist${ i }" value="${ artists[i].value }">
                    <label for="artist${ i }" style="background-image: url('${ artists[i].image }');">${ artists[i].display_name }</label>
                `;
            }

            // load characters
            const charactersArea = document.getElementById("characters");
            
            for (const i in characters) {
                
                charactersArea.innerHTML += `
                    <input class="boxy" type="radio" oninput="craft()" id="characters${ i }" name="characters" value="${ characters[i].value }"${ i == 0 ? " checked" : "" }>
                    <label for="characters${ i }" style="background-image: url('${ characters[i].image }');">${ characters[i].display_name }</label>
                `;
            }

            // load clothing
            const clothingArea = document.getElementById("clothing");
            
            for (const i in clothing) {
                
                clothingArea.innerHTML += `
                    <input class="boxy" type="radio" oninput="craft()" id="clothing${ i }" name="clothing" value="${ clothing[i].value }"${ i == 0 ? " checked" : "" }>
                    <label for="clothing${ i }">${ clothing[i].display_name }</label>
                `;
            }

            // craft on load
            craft();
        }
        

        
        const sizeHeirarchy = [ "small", "slightly big", "big", "slightly huge", "huge", "slightly massive", "massive", "hyper" ]; // giant?

        function getSize(value) {
            return sizeHeirarchy[parseInt((value * sizeHeirarchy.length - 1) / 100.0)];
        }
        
        // value is in range [1, 100]
        function constructBreastsPrompt(value) {

            return getSize(value) + " breasts";
        }

        function constructBellyPrompt(value) {

            if (value == 1) {
                return "no belly, hourglass, narrow waist, slim";
            }

            let extra = "";

            if (value < 20) {
                extra += "chubby, ";
            }

            if (value > 80) {
                extra += "belly sticking out, round belly, ";
            }
            
            return extra + getSize(value) + " belly";
        }
        
        function constructHipsPrompt(value) {

            let extra = "";

            if (value > 50) {
                extra += "(thick thighs:1." + parseInt(value / 10 - 5) + "), ";
            }

            if (value > 80) {
                extra += "big ass, ";
            }
            
            return extra + getSize(value) + " hips";
        }

        function constructLegsPrompt(value) {

            if (value == 1) {
                return "slender legs";
            }

            let extra = "";

            if (value > 50) {
                extra += "(fat legs, fat knees, fat calves:1." + parseInt(value / 10 - 5) + "), ";
            }
            
            return extra + getSize(value) + " calves";
        }
        
        
        
        function craft() {

            const output = document.getElementById("output");
            output.value = "";

            const comments = document.getElementById("comments").checked;

            if (comments)
                output.value += "/* quality */\n";
            output.value += "best quality, high rating, (high rating), absurd res, high res, detailed, masterpiece, detailed face, intricate detail, sophisticated detail, exquisite detail, absurd resolution, correct anatomy, 8k, (highly detailed face), highly detailed skin texture, gorgeous, perfect hands, ";

            if (comments)
                output.value += "\n\n/* composition */\n";
            output.value += document.getElementById("girl-count").checked ? "2girls, 2women, " : "1girl, 1woman, ";

            output.value += "smile, happy, bedroom eyes, ";

            if (comments)
                output.value += "\n\n/* artists */";
            for (const checkbox of document.getElementById("artists").children) {

                if (checkbox.checked) {

                    if (comments)
                        output.value += "\n";
                    output.value += checkbox.value + ", ";
                }
            }

            if (comments)
                output.value += "\n\n/* character */\n";
            output.value += document.querySelector('input[name="characters"]:checked').value + ", ";

            if (comments)
                output.value += "\n\n/* clothing */\n";
            output.value += document.querySelector('input[name="clothing"]:checked').value + ", ";
            
            if (comments)
                output.value += "\n\n/* figure */\n";
            output.value += "(" + constructBreastsPrompt(document.getElementById("breasts-thickness").value) + ", ";
            output.value +=       constructBellyPrompt(document.getElementById("belly-thickness").value)     + ", ";
            output.value +=       constructHipsPrompt(document.getElementById("hips-thickness").value)       + ", ";
            output.value +=       constructLegsPrompt(document.getElementById("legs-thickness").value)       + ":1.3)";
        }
    </script>

    <style>
        body { font-family: sans-serif; display: grid; grid-template-columns: 1fr 2fr; gap: 1em; }
        h3 { border-bottom: 1px solid grey; }
        
        input.boxy { display: none; }
        input.boxy         + label { cursor: pointer; filter: brightness(0.5); transition-duration: 0.2s; border: 1px solid black; border-radius: 4px; display: flex; justify-content: center; align-items: center; font-size: 1.2em; font-weight: 700; text-shadow: 0 0 10px white; background-color: #eee; flex: 0 0 180px; aspect-ratio: 1; background-position: center; background-size: cover; overflow: hidden; }
        input.boxy:checked + label { filter: brightness(1); }

        /* stole this from w3schools */
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; vertical-align: middle; }
        .switch input { display: none; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: 0.2s; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: 0.2s; }
        input:checked + .slider { background-color: #2196F3; }
        input:checked + .slider:before { transform: translateX(26px); }
    </style>
</head>
<body onload="init();">

    <textarea readonly id="output" style="padding: 1em; resize: none; font-size: smaller; border: 1px solid black;"></textarea>

    <div>
        <h3>Meta</h3>
        <label class="switch">
            <input type="checkbox" id="comments" oninput="craft()" checked>
            <span class="slider"></span>
        </label>
        Include comments/linebreaks
        
        <h3>Composition</h3>

        1girl
        <label class="switch">
            <input type="checkbox" id="girl-count" oninput="craft()">
            <span class="slider"></span>
        </label>
        2girls
        <br><br>

        fullbody/upperbody (needs to disable hips+legs slider)
        <br>
        angle (from above, from front, from side, from behind, from below; + dutch angle), mood, pose/action
    
        <h3>Scene</h3>
        Bedroom, beach, etc
        
        <h3>Artists</h3>
        <div style="overflow-x: scroll;">
            <div id="artists" style="display: flex; gap: 1em;"></div>
        </div>
    
        <h3>Character</h3>
        <div style="overflow-x: scroll;">
            <div id="characters" style="display: flex; gap: 1em;"></div>
        </div>
    
        <h3>Clothing</h3>
        <div style="overflow-x: scroll;">
            <div id="clothing" style="display: flex; gap: 1em;"></div>
        </div>
    
        <h3>Figure</h3>
        checkboxes: cellulite, stretch marks, deep cleavage, shortstack
        <table>
            <tr>
                <td>Breasts:</td>
                <td>
                    <input id="breasts-thickness" type="range" min="1" max="100" value="20" oninput="craft()">
                </td>
            </tr>
            <tr>
                <td>Belly:</td>
                <td>
                    <input id="belly-thickness" type="range" min="1" max="100" value="20" oninput="craft()">
                </td>
            </tr>
            <tr>
                <td>Hips:</td>
                <td>
                    <input id="hips-thickness" type="range" min="1" max="100" value="20" oninput="craft()">
                </td>
            </tr>
            <tr>
                <td>Legs:</td>
                <td>
                    <input id="legs-thickness" type="range" min="1" max="100" value="20" oninput="craft()">
                </td>
            </tr>
        </table>
    </div>
    
</body>
</html>
